<div class="container-fluid px-4 py-3">
  <!-- Header Section -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h3 class="mb-1 fw-bold text-dark">
        <i class="bi bi-people-fill text-primary me-2"></i>
        Clients
      </h3>
      <p class="text-muted mb-0">Manage your client relationships</p>
    </div>
    <button 
      class="btn btn-primary px-4 py-2 rounded-pill shadow-sm"
      (click)="openAddModal()">
      <i class="bi bi-plus-circle me-2"></i>
      Add New Client
    </button>
  </div>

  <!-- Main Content -->
  <div class="card border-0 shadow-sm">
    <div class="card-body p-0">
      @if (clients$|async; as clients) {
        <app-data-table
          [data]="clients"
          [columns]="clientColumns"
          [options]="tableOptions"
          [actions]="clientActions"
          (actionClicked)="onAction($event)"
        ></app-data-table>
      }
    </div>
  </div>
</div>

<!-- Add Client Modal -->
@if (showAddModal) {
  <div class="modal show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">
    <div class="modal-dialog modal-lg">
      <div class="modal-content border-0 shadow">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title mb-0">
            <i class="bi bi-person-plus me-2"></i>
            Add New Client
          </h5>
          <button 
            type="button" 
            class="btn-close btn-close-white" 
            (click)="closeAddModal()"></button>
        </div>
        <div class="modal-body p-4">
          <form (ngSubmit)="onSubmitClient()" #clientForm="ngForm">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label fw-semibold">First Name *</label>
                <input 
                  type="text" 
                  class="form-control" 
                  [(ngModel)]="newClient.first_name"
                  name="firstName"
                  required
                  placeholder="Enter first name">
              </div>
              <div class="col-md-6">
                <label class="form-label fw-semibold">Last Name *</label>
                <input 
                  type="text" 
                  class="form-control" 
                  [(ngModel)]="newClient.last_name"
                  name="lastName"
                  required
                  placeholder="Enter last name">
              </div>
              <div class="col-md-6">
                <label class="form-label fw-semibold">Email *</label>
                <input 
                  type="email" 
                  class="form-control" 
                  [(ngModel)]="newClient.email"
                  name="email"
                  required
                  placeholder="Enter email address">
              </div>
              <div class="col-md-6">
                <label class="form-label fw-semibold">Phone</label>
                <input 
                  type="tel" 
                  class="form-control" 
                  [(ngModel)]="newClient.phone"
                  name="phone"
                  placeholder="Enter phone number">
              </div>
              <div class="col-12">
                <label class="form-label fw-semibold">Company</label>
                <input 
                  type="text" 
                  class="form-control" 
                  [(ngModel)]="newClient.company"
                  name="company"
                  placeholder="Enter company name">
              </div>
              <div class="col-12">
                <label class="form-label fw-semibold">Website</label>
                <input 
                  type="url" 
                  class="form-control" 
                  [(ngModel)]="newClient.website"
                  name="website"
                  placeholder="https://example.com">
              </div>
              <div class="col-12">
                <label class="form-label fw-semibold">Notes</label>
                <textarea 
                  class="form-control" 
                  rows="3"
                  [(ngModel)]="newClient.notes"
                  name="notes"
                  placeholder="Additional notes about the client"></textarea>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer bg-light">
          <button 
            type="button" 
            class="btn btn-outline-secondary" 
            (click)="closeAddModal()">
            Cancel
          </button>
          <button 
            type="button" 
            class="btn btn-primary px-4"
            (click)="onSubmitClient()"
            [disabled]="isSubmitting || !newClient.first_name || !newClient.last_name || !newClient.email">
            @if (isSubmitting) {
              <span class="spinner-border spinner-border-sm me-2"></span>
            }
            Create Client
          </button>
        </div>
      </div>
    </div>
  </div>
}
